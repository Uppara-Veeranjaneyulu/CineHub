{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import MovieList from'../components/MovieList';import{API_KEY,BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[movies,setMovies]=useState([]);const[search,setSearch]=useState('');const[genres,setGenres]=useState([]);const[selectedGenre,setSelectedGenre]=useState('');const[watchlist,setWatchlist]=useState(JSON.parse(localStorage.getItem('watchlist'))||[]);useEffect(()=>{fetchTrending();fetchGenres();},[]);const fetchTrending=async()=>{const{data}=await axios.get(\"\".concat(BASE_URL,\"/trending/movie/week?api_key=\").concat(API_KEY));setMovies(data.results);};const fetchGenres=async()=>{const{data}=await axios.get(\"\".concat(BASE_URL,\"/genre/movie/list?api_key=\").concat(API_KEY));setGenres(data.genres);};const handleSearch=async()=>{if(!search)return;const{data}=await axios.get(\"\".concat(BASE_URL,\"/search/movie?api_key=\").concat(API_KEY,\"&query=\").concat(search));setMovies(data.results);};const filterByGenre=async genreId=>{setSelectedGenre(genreId);const{data}=await axios.get(\"\".concat(BASE_URL,\"/discover/movie?api_key=\").concat(API_KEY,\"&with_genres=\").concat(genreId));setMovies(data.results);};const addToWatchlist=movie=>{const updatedList=[...watchlist,movie];setWatchlist(updatedList);localStorage.setItem('watchlist',JSON.stringify(updatedList));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2 p-4 items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search movies...\",value:search,onChange:e=>setSearch(e.target.value),className:\"p-2 rounded text-black flex-grow\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"bg-orange-500 px-4 py-2 rounded hover:bg-orange-400\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 p-4 overflow-x-auto\",children:genres.map(g=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>filterByGenre(g.id),className:\"px-3 py-1 rounded \".concat(selectedGenre===g.id?'bg-orange-500':'bg-gray-700',\" hover:bg-orange-400\"),children:g.name},g.id))}),/*#__PURE__*/_jsx(MovieList,{movies:movies,addToWatchlist:addToWatchlist,isWatchlist:false})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","MovieList","API_KEY","BASE_URL","jsx","_jsx","jsxs","_jsxs","Home","movies","setMovies","search","setSearch","genres","setGenres","selectedGenre","setSelectedGenre","watchlist","setWatchlist","JSON","parse","localStorage","getItem","fetchTrending","fetchGenres","data","get","concat","results","handleSearch","filterByGenre","genreId","addToWatchlist","movie","updatedList","setItem","stringify","children","className","type","placeholder","value","onChange","e","target","onClick","map","g","id","name","isWatchlist"],"sources":["C:/Users/uuppa/OneDrive/Documents/CIneHub/src/pages/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport MovieList from '../components/MovieList';\r\nimport { API_KEY, BASE_URL } from '../config';\r\n\r\nconst Home = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [genres, setGenres] = useState([]);\r\n  const [selectedGenre, setSelectedGenre] = useState('');\r\n  const [watchlist, setWatchlist] = useState(JSON.parse(localStorage.getItem('watchlist')) || []);\r\n\r\n  useEffect(() => {\r\n    fetchTrending();\r\n    fetchGenres();\r\n  }, []);\r\n\r\n  const fetchTrending = async () => {\r\n    const { data } = await axios.get(`${BASE_URL}/trending/movie/week?api_key=${API_KEY}`);\r\n    setMovies(data.results);\r\n  };\r\n\r\n  const fetchGenres = async () => {\r\n    const { data } = await axios.get(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`);\r\n    setGenres(data.genres);\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    if (!search) return;\r\n    const { data } = await axios.get(`${BASE_URL}/search/movie?api_key=${API_KEY}&query=${search}`);\r\n    setMovies(data.results);\r\n  };\r\n\r\n  const filterByGenre = async (genreId) => {\r\n    setSelectedGenre(genreId);\r\n    const { data } = await axios.get(`${BASE_URL}/discover/movie?api_key=${API_KEY}&with_genres=${genreId}`);\r\n    setMovies(data.results);\r\n  };\r\n\r\n  const addToWatchlist = (movie) => {\r\n    const updatedList = [...watchlist, movie];\r\n    setWatchlist(updatedList);\r\n    localStorage.setItem('watchlist', JSON.stringify(updatedList));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex flex-col sm:flex-row gap-2 p-4 items-center\">\r\n        <input type=\"text\" placeholder=\"Search movies...\" value={search} onChange={e => setSearch(e.target.value)}\r\n          className=\"p-2 rounded text-black flex-grow\"/>\r\n        <button onClick={handleSearch} className=\"bg-orange-500 px-4 py-2 rounded hover:bg-orange-400\">Search</button>\r\n      </div>\r\n      <div className=\"flex gap-2 p-4 overflow-x-auto\">\r\n        {genres.map(g => (\r\n          <button \r\n            key={g.id} \r\n            onClick={() => filterByGenre(g.id)}\r\n            className={`px-3 py-1 rounded ${selectedGenre===g.id?'bg-orange-500':'bg-gray-700'} hover:bg-orange-400`}\r\n          >{g.name}</button>\r\n        ))}\r\n      </div>\r\n      <MovieList movies={movies} addToWatchlist={addToWatchlist} isWatchlist={false} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,OAASC,OAAO,CAAEC,QAAQ,KAAQ,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACiB,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACmB,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAACqB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,EAAI,EAAE,CAAC,CAE/FvB,SAAS,CAAC,IAAM,CACdwB,aAAa,CAAC,CAAC,CACfC,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAD,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAEE,IAAK,CAAC,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,GAAG,IAAAC,MAAA,CAAIxB,QAAQ,kCAAAwB,MAAA,CAAgCzB,OAAO,CAAE,CAAC,CACtFQ,SAAS,CAACe,IAAI,CAACG,OAAO,CAAC,CACzB,CAAC,CAED,KAAM,CAAAJ,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,GAAG,IAAAC,MAAA,CAAIxB,QAAQ,+BAAAwB,MAAA,CAA6BzB,OAAO,CAAE,CAAC,CACnFY,SAAS,CAACW,IAAI,CAACZ,MAAM,CAAC,CACxB,CAAC,CAED,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAAClB,MAAM,CAAE,OACb,KAAM,CAAEc,IAAK,CAAC,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,GAAG,IAAAC,MAAA,CAAIxB,QAAQ,2BAAAwB,MAAA,CAAyBzB,OAAO,YAAAyB,MAAA,CAAUhB,MAAM,CAAE,CAAC,CAC/FD,SAAS,CAACe,IAAI,CAACG,OAAO,CAAC,CACzB,CAAC,CAED,KAAM,CAAAE,aAAa,CAAG,KAAO,CAAAC,OAAO,EAAK,CACvCf,gBAAgB,CAACe,OAAO,CAAC,CACzB,KAAM,CAAEN,IAAK,CAAC,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,GAAG,IAAAC,MAAA,CAAIxB,QAAQ,6BAAAwB,MAAA,CAA2BzB,OAAO,kBAAAyB,MAAA,CAAgBI,OAAO,CAAE,CAAC,CACxGrB,SAAS,CAACe,IAAI,CAACG,OAAO,CAAC,CACzB,CAAC,CAED,KAAM,CAAAI,cAAc,CAAIC,KAAK,EAAK,CAChC,KAAM,CAAAC,WAAW,CAAG,CAAC,GAAGjB,SAAS,CAAEgB,KAAK,CAAC,CACzCf,YAAY,CAACgB,WAAW,CAAC,CACzBb,YAAY,CAACc,OAAO,CAAC,WAAW,CAAEhB,IAAI,CAACiB,SAAS,CAACF,WAAW,CAAC,CAAC,CAChE,CAAC,CAED,mBACE3B,KAAA,QAAA8B,QAAA,eACE9B,KAAA,QAAK+B,SAAS,CAAC,kDAAkD,CAAAD,QAAA,eAC/DhC,IAAA,UAAOkC,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,kBAAkB,CAACC,KAAK,CAAE9B,MAAO,CAAC+B,QAAQ,CAAEC,CAAC,EAAI/B,SAAS,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACxGH,SAAS,CAAC,kCAAkC,CAAC,CAAC,cAChDjC,IAAA,WAAQwC,OAAO,CAAEhB,YAAa,CAACS,SAAS,CAAC,qDAAqD,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC3G,CAAC,cACNhC,IAAA,QAAKiC,SAAS,CAAC,gCAAgC,CAAAD,QAAA,CAC5CxB,MAAM,CAACiC,GAAG,CAACC,CAAC,eACX1C,IAAA,WAEEwC,OAAO,CAAEA,CAAA,GAAMf,aAAa,CAACiB,CAAC,CAACC,EAAE,CAAE,CACnCV,SAAS,sBAAAX,MAAA,CAAuBZ,aAAa,GAAGgC,CAAC,CAACC,EAAE,CAAC,eAAe,CAAC,aAAa,wBAAuB,CAAAX,QAAA,CACzGU,CAAC,CAACE,IAAI,EAHDF,CAAC,CAACC,EAGQ,CAClB,CAAC,CACC,CAAC,cACN3C,IAAA,CAACJ,SAAS,EAACQ,MAAM,CAAEA,MAAO,CAACuB,cAAc,CAAEA,cAAe,CAACkB,WAAW,CAAE,KAAM,CAAE,CAAC,EAC9E,CAAC,CAEV,CAAC,CAED,cAAe,CAAA1C,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}